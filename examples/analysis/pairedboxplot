# -*- coding: utf-8 -*-
import os

import numpy as np
import pandas as pd
import seaborn as sns
from matplotlib import pyplot as plt
from scipy.stats import pearsonr

def split_matched(data):
    """Split matched data into 2d and 3d dataframes."""
    data2d = data.drop(columns=['threshold3d'])
    data2d['type'] = '2D'
    data3d = data.drop(columns=['threshold'])
    data3d['type'] = '3D'
    data3d.reset_index(inplace=True, drop=False)
    data2d.reset_index(inplace=True, drop=False)
    data3d.rename(columns={'threshold3d': 'threshold'}, inplace=True)
    return pd.concat([data2d, data3d], axis=0, ignore_index=True)


os.chdir('../../')
threshdat = pd.read_csv('thresh.csv')
sns.set_style('whitegrid')
#remove all samples which dont end with a 2
threshdat = threshdat[threshdat['sample'].astype(str).str.endswith('2')]
data = split_matched(threshdat).query('nsim == 0 and sim == 3 and sample == 252')
print(pd.unique(data['type']))
sns.boxplot(data=data, x='type', y='threshold',palette='colorblind')
sns.stripplot(data=data, x='type', y='threshold',s=10,palette='colorblind')
sns.lineplot(
    data=data, x="type", y="threshold", units = 'index',estimator=None
)
plt.show()
